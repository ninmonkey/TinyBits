<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Html5 Input: Type = range, list = tickmarks.</title>
</head>

<body>
    <style type="text/css"> </style>
    <nav> <ul> <li><a href="..">Go Back тое</a></li> </ul> </nav>
    <section>
        <input
            type = "range"
            list = "tickmarks-dlist"
            min  = "0"
            max  = "100"
            id   = "tick"
            name = "tick"
        />
        <label
            id  = "tick-label"
            for = "tick">
            Tip amount:
        </label>
        <datalist id="tickmarks-dlist">
            <option value="0" label="None"></option>
            <option value="10" label="Minimum Tip"></option>
            <option value="20" label="Level 1"></option>
            <option value="30" label="Level 2"></option>
            <option value="50" label="Level 5"></option>
            <option value="100" label="Max"></option>
        </datalist>
    </section>
    <section>
        <h1>About</h1>
        <p>Form uses a <code>&lt;input type="range" list="tickmarks-dlist"&gt;</code></p>
        <p>The datalist defines the tick thresholds, and the labels for each bracket.</p>
        <p>Live updates label using the highest matching <code>&lt;datalist&gt;</code> value</p>
    </section>
    <script type="module">
        const tick_input = document.getElementById( 'tick' )
        // const tick_datalist = document.getElementById( 'tickmarks-dlist' )
        // const tick_label = document.getElementById( 'tick-label' )

        function updateTipLabel( event ) {
            const tick_datalist = document.getElementById( 'tickmarks-dlist' )
            const tick_input = document.getElementById( 'tick' )
            const tick_label = document.getElementById( 'tick-label' )
            const eventValue = event.target.value
            const eventAsNum = event.target.valueAsNumber

            // or: document.querySelectorAll( '#tickmarks-dlist option' )
            const query_largerValues =  [...tick_datalist.querySelectorAll('option') ]
                .filter( el => parseFloat( eventAsNum ) >= parseFloat( el.value )  )

            const largest_value      = query_largerValues.at(-1)
            const label_from_largest = largest_value ? largest_value.label : `${ eventValue } [ evt.value ]`
            const newLabel           = `Tip amount: ${ tick_input.value }% ${ label_from_largest }`

            tick_label.textContent = newLabel

            console.trace(
                'split into steps to let you inspect a breakpoint here',
                { newLabel, largest_value, query_largerValues } )
        }

        tick_input.addEventListener( 'input', updateTipLabel )
        tick_input.addEventListener( 'change', updateTipLabel )
    </script>
</body>

</html>